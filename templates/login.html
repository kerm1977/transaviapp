<!-- login.html -->
{% extends "base.html" %}

{% block title %}Iniciar Sesión{% endblock %}

{% block head_styles %}
<style>
    /* Estilos para reemplazar el efecto Card y centrar el formulario */
    .auth-container {
        /* Centrado en la página */
        max-width: 450px;
        width: 90%;
        margin: 40px auto; /* Agrega margen superior/inferior para espaciamiento */
        padding: 0; /* Elimina el padding del card */
        /* Eliminación del efecto card */
        background: transparent;
        box-shadow: none;
        border-radius: 0;
    }
    
    /* Mantener los estilos de input y botones */
    .input-group {
        margin-bottom: 20px;
        position: relative;
    }

    .input-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
        color: var(--clr-text-secondary);
    }

    .input-group input[type="text"],
    .input-group input[type="password"],
    .input-group input[type="email"],
    .input-group input[type="tel"] {
        width: 100%;
        padding: 12px 10px;
        border: 1px solid var(--clr-border);
        border-radius: 6px;
        background-color: var(--clr-background-alt);
        color: var(--clr-text-primary);
        transition: border-color 0.3s;
    }

    .input-group input:focus {
        border-color: var(--clr-main);
        outline: none;
    }
    
    .toggle-password {
        position: absolute;
        right: 10px;
        top: 60%; /* Ajustar la posición vertical del ojo */
        transform: translateY(-50%);
        cursor: pointer;
        color: var(--clr-text-secondary);
    }

    .btn-primary {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 6px;
        background-color: var(--clr-main);
        color: #000;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.1s;
    }

    .btn-primary:hover {
        background-color: var(--clr-warning);
    }
    
    /* El contenedor principal ya tiene min-h-screen en base.html, 
       pero agregamos flexibilidad para centrar en el bloque de contenido si es necesario */
    .mainContent {
        display: flex;
        justify-content: center;
        align-items: flex-start; /* Alineación arriba para que no flote en la mitad */
        min-height: 100vh;
        padding-top: 50px; /* Espacio superior */
    }

</style>
{% endblock %}

{% block content %}
<div class="auth-container">
    <h1 style="text-align: center; color: var(--clr-main); margin-bottom: 25px;">Iniciar Sesión</h1>
    
    <form method="POST" action="{{ url_for('auth.login') }}">
        
        <!-- Campo de Email/Usuario -->
        <div class="input-group">
            <label for="identifier">Email o Usuario:</label>
            <input type="text" id="identifier" name="identifier" value="{{ request.form.identifier or '' }}" required>
        </div>

        <!-- Campo de Contraseña con Ojo (Toggle Password) -->
        <div class="input-group">
            <label for="password">Contraseña:</label>
            <input type="password" id="password" name="password" required>
            <span class="toggle-password" onclick="togglePasswordVisibility('password')">
                <ion-icon name="eye-off-outline" id="icon-password"></ion-icon>
            </span>
        </div>

        <!-- Opciones Adicionales -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; font-size: 0.9em;">
            
            <!-- Checkbox de Mantener Sesión Activa (Recordar Contraseña en el prompt) -->
            <div style="display: flex; align-items: center;">
                <input type="checkbox" id="remember_me" name="remember_me" style="margin-right: 5px; accent-color: var(--clr-main);">
                <label for="remember_me" style="margin: 0; cursor: pointer;">Mantener sesión activa</label>
            </div>
            
            <!-- Enlace de Recordar Contraseña (Enlace que lleva a un placeholder) -->
            <a href="#" style="color: var(--clr-main); text-decoration: none;">¿Olvidaste tu contraseña?</a>
        </div>

        <button type="submit" class="btn-primary">Entrar</button>
        
    </form>
    
    <p style="text-align: center; margin-top: 20px; font-size: 0.9em;">
        ¿Aún no tienes una cuenta? 
        <a href="{{ url_for('auth.register') }}" style="color: var(--clr-main); text-decoration: none; font-weight: bold;">Regístrate aquí</a>
    </p>

</div>
{% endblock %}

{% block scripts %}
<script>
    // Función para mostrar/ocultar la contraseña
    function togglePasswordVisibility(fieldId) {
        const field = document.getElementById(fieldId);
        const icon = document.getElementById(`icon-${fieldId}`);
        if (field.type === "password") {
            field.type = "text";
            icon.name = "eye-outline";
        } else {
            field.type = "password";
            icon.name = "eye-off-outline";
        }
    }
</script>
{% endblock %}
